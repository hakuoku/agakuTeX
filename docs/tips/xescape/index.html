<!doctype html>
<html class="no-js" lang="ja" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8">
    <title>ちょっと楽なエスケープ | あがきながら覚えるTeX</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="白屋書房">
<meta name="description" content="" />

    
<meta property="og:locale" content="ja">
<meta property="og:title" content="ちょっと楽なエスケープ" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="あがきながら覚えるTeX" />
<meta property="og:url" content="https://hakuoku.github.io/agakuTeX/tips/xescape/" />




<meta property="og:type" content="article" />
<meta property="article:section" content="tips" />
<meta property="article:published_time" content="2018-01-22" />
<meta property="article:modified_time" content="2018-01-22" />

    

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="ちょっと楽なエスケープ" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="https://hakuoku.github.io/agakuTeX/tips/xescape/" />
<meta name="twitter:image:src" content="https://hakuoku.github.io/agakuTeX//media/twitter-card.jpg">
<meta name="twitter:domain" content="https://hakuoku.github.io/agakuTeX/">
<meta name="twitter:site" content="@isaribi_saitoh" />
<meta name="twitter:creator" content="@isaribi_saitoh" />

    
    <meta name="generator" content="Hugo 0.34" />
    <link rel="canonical" href="https://hakuoku.github.io/agakuTeX/tips/xescape/">
    
    
    <link rel="stylesheet" href="https://hakuoku.github.io/agakuTeX/css/prism.css">

    <link rel="stylesheet" href="https://hakuoku.github.io/agakuTeX/css/drawer.css">

<link rel="stylesheet" href="https://hakuoku.github.io/agakuTeX/css/style.css">

<link rel="apple-touch-icon" sizes="180x180" href="https://hakuoku.github.io/agakuTeX/img/apple-touch-icon.png">
<link rel="icon" type="image/png" href="https://hakuoku.github.io/agakuTeX/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://hakuoku.github.io/agakuTeX/img/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://hakuoku.github.io/agakuTeX/manifest.json">
<link rel="mask-icon" href="https://hakuoku.github.io/agakuTeX/img/safari-pinned-tab.svg" color="#636363">
<meta name="apple-mobile-web-app-title" content="あがきながら覚えるTeX">
<meta name="application-name" content="あがきながら覚えるTeX">
<meta name="theme-color" content="#333333">

</head>


<body class="template template--post drawer drawer--right">
    <section class="header-wrapper">
        <header class="headline" role="banner">
    
        <a class="headline__title" href="https://hakuoku.github.io/agakuTeX/"><img src="https://hakuoku.github.io/agakuTeX/img/logo.png" alt="Home"></a>
    
</header>

        <nav class="menu" role="navigation" id="main-menu">
    <ul class="menu__items">
        
        
        <li class="blog">
            <a href="http://hakuoku.hatenablog.com/" title="Blog"><img src="https://hakuoku.github.io/agakuTeX/img/hb.png" alt="Blog"></a>
        </li>
        
        
        <li class="twitter">
            <a href="https://twitter.com/isaribi_saitoh" title="Follow me"><img src="https://hakuoku.github.io/agakuTeX/img/tw.png" alt="Follow me"></a>
        </li>
        
        
        <li class="github">
            <a href="https://github.com/hakuoku" title="Fork me"><img src="https://hakuoku.github.io/agakuTeX/img/gh.png" alt="Fork me"></a>
        </li>
        
        
    </ul>
</nav>

        
<gcse:searchbox-only></gcse:searchbox-only>

<button type="button" class="drawer-toggle drawer-hamburger">
  <span class="sr-only">toggle navigation</span>
  <span class="drawer-hamburger-icon"><img src="https://hakuoku.github.io/agakuTeX/img/toc.png" alt="TOC"></span>
</button>
 
<nav id="side-menu" class="drawer-nav">
  <ul class="drawer-menu">
    
    <li><a href="https://hakuoku.github.io/agakuTeX/">TOP</a></li>
    
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">前説 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/1_1beginning/">発端</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/1_2whatstex/">TeXとは</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/1_3usage/">このサイトの使い方</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">導入 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/2_1prepare/">準備</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/2_2install/">インストール</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/2_3test/">テスト</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">ファイル作成 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/3_1stuff/">いるもの</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/3_2settings/">設定</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/3_3escape/">ファイル作成とエスケープ</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/3_4documentclass/">ドキュメントクラスの設定</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">本文の編集 - 基盤編 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/4_1linebreak/">改行・段落</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/4_2indent/">インデント（字下げ）・空白</a></li>
                    
                
                    
                    <li class = "drawer-dropdown-menu-item sub-menu">
                    全角・半角 - 文字と記号の縦横
                        <ul class = "sub">
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_1rensuji/">縦中横</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_2regex/">note：検索・置換と正規表現</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_3accent1/">アクセントと特殊記号 (1)</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_4accent2/">アクセントと特殊記号 (2)</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_5unicode/">note：Unicodeで遊ぼう</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_6accent3/">アクセントと特殊記号 (3)</a></li>
                            
                        </ul>
                    </li>
                    
                
                    
                    <li class = "drawer-dropdown-menu-item sub-menu">
                    約物
                        <ul class = "sub">
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_0punct/">はじめに</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_1quotation/">引用符</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_2otf/">OTFパッケージ</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_3exclamation/">！と？ - 縦中横ふたたび</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_4wordglue/">和文・欧文間のスペース</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_5brackets/">カッコ類</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_6dash/">ダッシュ</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_7parameter/">note：変数と長さの単位</a></li>
                            
                        </ul>
                    </li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/4_5summary1/">まとめ</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">本文の編集 - 発展編 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_1flush/">カスタム字下げ・地寄せ</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_2ruby/">ルビ</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_3bouten/">傍点・傍線</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_4emph/">太字・斜体</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_5fontsize/">文字サイズ</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_6framed/">罫囲み（枠をつける）</a></li>
                    
                
                    
                    <li class = "drawer-dropdown-menu-item sub-menu">
                    注
                        <ul class = "sub">
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/5_7_1footnote/">脚注</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/5_7_2endnote/">後注</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/5_7_3xobeylines/">note：改行マクロの副作用</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/5_7_4warichu/">割り注</a></li>
                            
                        </ul>
                    </li>
                    
                
            </ul>
            </li>
        
    
        
        <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/replace/">青空文庫からの置換一覧（作成中）</a></li>
        
    
        
        <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/reference/">主要参考文献（随時追加）</a></li>
        
    
        
        <li><a href="https://hakuoku.github.io/agakuTeX/topics/">索引</a></li>
        
    
        
        <li><a href=""></a></li>
        
    
        
        <li><a href="https://hakuoku.github.io/agakuTeX/tips/">TeX Tips</a></li>
        
    
  </ul>
</nav>

    </section>
    <main class="content" role="main" id="main-content" itemscope itemtype="http://schema.org/Article">
        <article class="post">
            <header>
                <h1 class="post__title" itemprop="name">ちょっと楽なエスケープ</h1>
            </header>
            <section class="post__content" itemprop="articleBody">
                

<p>&#x3000;<a href="https://hakuoku.github.io/agakuTeX/tutorial/3_3escape/">エスケープ</a>の項では基本を大事にという観点から、特殊記号にバックスラッシュをつける初歩的な方法を紹介しました。<br />
　ですが実はもう少し楽にエスケープする方法があります。特殊記号の属するカテゴリーコードを書き換えてしまうという力技です。</p>

<p>　おさらいをすると、TeXにおいては以下の記号たちは特別な役割を持っているため、文中にはそのまま書けないんでした。</p>

<table>
<thead>
<tr>
<th align="center">記号</th>
<th align="left">TeXにとっての働き</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">#</td>
<td align="left">命令や環境の引数</td>
</tr>

<tr>
<td align="center">$</td>
<td align="left">数式モードへ移行</td>
</tr>

<tr>
<td align="center">%</td>
<td align="left">以降をコメントアウト</td>
</tr>

<tr>
<td align="center">&amp;</td>
<td align="left">表のセルの区切り</td>
</tr>

<tr>
<td align="center">_</td>
<td align="left">下付きの添字</td>
</tr>

<tr>
<td align="center">{</td>
<td align="left">グループ化の開始</td>
</tr>

<tr>
<td align="center">}</td>
<td align="left">グループ化の終了</td>
</tr>

<tr>
<td align="center">\</td>
<td align="left">コマンドのためのエスケープ文字</td>
</tr>

<tr>
<td align="center">|</td>
<td align="left">表の縦の罫線</td>
</tr>

<tr>
<td align="center">^</td>
<td align="left">上付きの添字</td>
</tr>

<tr>
<td align="center">~</td>
<td align="left">改行を抑制して単語間の空白を空ける</td>
</tr>
</tbody>
</table>

<p>　しかし今我々が組んでいるのは縦書きの小説です。表とか数式モードとか、使わなくないですか？<br />
　少なくとも筆者は使いません。表組みも正直他のソフトで作って画像として貼った方が早いです。上付き下付きの数字も、多分小説中では一生使わないと思います。それよりはアンダーバーやチルダを含むURLとかを直書きできた方が嬉しい。</p>

<p>　というわけで、これらの記号から特別な役割を剥奪して、ただの記号に戻してやればいいんです。そのために使うのが<strong>カテゴリーコード</strong>です。</p>

<p>　カテゴリーコードとは、詳しくは<a href="https://texwiki.texjp.org/?TeX%E5%85%A5%E9%96%80%2F%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E4%BD%9C%E6%88%90#mef7a198">こちら</a>で説明されていますが、読んで字の如く文字・記号の属するカテゴリーの番号のことです。具体的には以下のようになっています（和文のことは忘れてください）。</p>

<table>
<thead>
<tr>
<th align="left">カテゴリーコード</th>
<th align="left">分類</th>
<th align="left">通常この分類に属する文字</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">0</td>
<td align="left">エスケープ文字</td>
<td align="left">\</td>
</tr>

<tr>
<td align="left">1</td>
<td align="left">グループ開始文字</td>
<td align="left">{</td>
</tr>

<tr>
<td align="left">2</td>
<td align="left">グループ終了文字</td>
<td align="left">}</td>
</tr>

<tr>
<td align="left">3</td>
<td align="left">数式モードへの移行文字</td>
<td align="left">$</td>
</tr>

<tr>
<td align="left">4</td>
<td align="left">アラインメントタブ</td>
<td align="left">&amp;</td>
</tr>

<tr>
<td align="left">5</td>
<td align="left">行の終了文字</td>
<td align="left">文字コード13の文字</td>
</tr>

<tr>
<td align="left">6</td>
<td align="left">パラメータ文字</td>
<td align="left">#</td>
</tr>

<tr>
<td align="left">7</td>
<td align="left">上付き文字</td>
<td align="left">^</td>
</tr>

<tr>
<td align="left">8</td>
<td align="left">下付き文字</td>
<td align="left">_</td>
</tr>

<tr>
<td align="left">9</td>
<td align="left">無視する文字</td>
<td align="left">文字コード0の文字</td>
</tr>

<tr>
<td align="left">10</td>
<td align="left">空白文字</td>
<td align="left">文字コード32の文字</td>
</tr>

<tr>
<td align="left">11</td>
<td align="left">英文字</td>
<td align="left">AからZまでおよびaからzまで</td>
</tr>

<tr>
<td align="left">12</td>
<td align="left">その他の文字</td>
<td align="left">!&ldquo;&lsquo;()*+,-./0123456789:;&lt;=&gt;?@[]`他1文字</td>
</tr>

<tr>
<td align="left">13</td>
<td align="left">アクティブ文字</td>
<td align="left">˜</td>
</tr>

<tr>
<td align="left">14</td>
<td align="left">コメント文字</td>
<td align="left">%</td>
</tr>

<tr>
<td align="left">15</td>
<td align="left">無効文字</td>
<td align="left">文字コード127の文字</td>
</tr>
</tbody>
</table>

<p>　特殊記号にはそれぞれ独立したカテゴリーコードが割り振られているのが分かりますね。これらをその他の記号を含むカテゴリーコード12に変更してやりたいと思います。</p>

<p>　使うのは<code>\catcode</code>コマンド。<code>\catcode`\&lt;文字&gt;=&lt;カテゴリーコード&gt;</code>という書式で、任意の文字のカテゴリーコードを自由に変えることができます。プリアンブルの <em>一番下</em> に以下のように書き込みます。</p>

<pre><code class="language-LaTeX">\catcode`\$=12
\catcode`\&amp;=12
\catcode`\_=12
\catcode`\|=12
\catcode`\^=12
</code></pre>

<p>　さすがにコマンドを指示するバックスラッシュと波括弧やコメント文字をただの記号にすることはできませんが、それ以外はこれで特殊な役割をなくし、ベタ書きできるようになりました。<br />
　どれを普通の記号にしてどれをしないかはご自分の文体に合わせて決めてください。上付きの数字を使いたければ最後の行を抜けばいいし、チルダをベタ書きしたかったら<code>\catcode`\~=12</code>を追加すればいいです。</p>

<p>　あとは通常通り、以下の表に従ってバックスラッシュ、波括弧、パーセントなど、ただの記号にできない記号をエスケープします。これらの記号が本文に出てこない、と断言できるかたは飛ばして結構です。断言までいかなくてもそんなに大量に出てこないという場合は、一括置換はせずにタイプセットした時に引っかかったところにバックスラッシュをつけていく、という形でもいいかと思います。</p>

<table>
<thead>
<tr>
<th align="left">検索する文字列</th>
<th align="left">置換後の文字列</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>&#092;&#092;</code></td>
<td align="center"><code>{&#092;&#092;textbackslash}</code></td>
</tr>
<tr>
<td align="center"><code>([#%&amp;{}])</code></td>
<td align="center"><code>&#092;&#092;$1</code></td>
</tr>
<tr>
<td align="center"><code>~</code></td>
<td align="center"><code>{&#092;&#092;textasciitilde}</code></td>
</tr>
<tr>
<td align="center"><code>&#092;&#092;{&#092;&#092;textbackslash&#092;&#092;}</code></td>
<td align="center"><code>{&#092;&#092;textbackslash}</code></td>
</tr>
</tbody>
</table>

<p>　ちなみにこの方法には、<a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_3accent1/">アクセントと特殊記号 (1)</a>のところでパッケージの練習として読み込んだ<code>\usepackage[T1]{fontenc}</code>が必須です。（無いと_や|などがおかしくなる）</p>

<h4 id="参考">参考</h4>

<ul>
<li><a href="https://en.wikibooks.org/wiki/TeX/catcode">TeX/catcode - Wikibooks</a></li>
<li><a href="https://texwiki.texjp.org/?TeX%E5%85%A5%E9%96%80%2F%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E4%BD%9C%E6%88%90#mef7a198">TeX入門/マクロの作成 - TeX Wiki</a></li>
<li><a href="https://blog.wtsnjp.com/2016/12/21/obfuscate-tex/">TeX の難読化 | ラング・ラグー</a></li>
<li><a href="https://blog.wtsnjp.com/2017/03/31/tex-by-topic2/">TeX by Topic ゼミ (2) カテゴリーコードの研究 | ラング・ラグー</a></li>
</ul>

            <footer class="post__meta">
                <ul class="post__meta__infos">
    <li class="post__meta__date"><time datetime="2018-01-22" itemprop="datePublished">(2018.2.15)</time></li>
</ul>
<meta itemprop="url" content="https://hakuoku.github.io/agakuTeX/tips/xescape/">
<meta itemprop="wordCount" content="1553" />
<meta itemprop="timeRequired" content="4 Min" />

            </footer>
            </section>
            <nav class = "pager" >
    <ul class = "pager-list">
        
        
    </ul>
</nav>

        </article>
        <section class="post__comment">
            <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hakuoku" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            
        </section>
    </main>
    <footer class="legal" role="contentinfo">
    <p>&copy; 2018 Hakuoku Shobo Some Rights Reserved. Performed by <a href="//gohugo.io" title="Hugo :: A fast and modern static website engine">Hugo</a> .</p>


</footer>

    
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/prism.js"></script>
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/iscroll.js"></script>
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/drawer.min.js"></script>
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/dropdown.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
      $(".drawer").drawer();
    });
</script>

</body>
</html>
