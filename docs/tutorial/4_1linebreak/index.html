<!doctype html>
<html class="no-js" lang="ja" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8">
    <title>改行・段落 | あがきながら覚えるTeX</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="白屋書房">
<meta name="description" content="" />

    
<meta property="og:locale" content="ja">
<meta property="og:title" content="改行・段落" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="あがきながら覚えるTeX" />
<meta property="og:url" content="https://hakuoku.github.io/agakuTeX/tutorial/4_1linebreak/" />




<meta property="og:type" content="article" />
<meta property="article:section" content="tutorial" />
<meta property="article:published_time" content="2017-04-22" />
<meta property="article:modified_time" content="2017-04-22" />

    

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="改行・段落" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="https://hakuoku.github.io/agakuTeX/tutorial/4_1linebreak/" />
<meta name="twitter:image:src" content="https://hakuoku.github.io/agakuTeX//media/twitter-card.jpg">
<meta name="twitter:domain" content="https://hakuoku.github.io/agakuTeX/">
<meta name="twitter:site" content="@isaribi_saitoh" />
<meta name="twitter:creator" content="@isaribi_saitoh" />

    
    <meta name="generator" content="Hugo 0.34" />
    <link rel="canonical" href="https://hakuoku.github.io/agakuTeX/tutorial/4_1linebreak/">
    
    
    <link rel="stylesheet" href="https://hakuoku.github.io/agakuTeX/css/prism.css">

    <link rel="stylesheet" href="https://hakuoku.github.io/agakuTeX/css/drawer.css">

<link rel="stylesheet" href="https://hakuoku.github.io/agakuTeX/css/style.css">

<link rel="apple-touch-icon" sizes="180x180" href="https://hakuoku.github.io/agakuTeX/img/apple-touch-icon.png">
<link rel="icon" type="image/png" href="https://hakuoku.github.io/agakuTeX/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://hakuoku.github.io/agakuTeX/img/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://hakuoku.github.io/agakuTeX/manifest.json">
<link rel="mask-icon" href="https://hakuoku.github.io/agakuTeX/img/safari-pinned-tab.svg" color="#636363">
<meta name="apple-mobile-web-app-title" content="あがきながら覚えるTeX">
<meta name="application-name" content="あがきながら覚えるTeX">
<meta name="theme-color" content="#333333">

</head>


<body class="template template--post drawer drawer--right">
    <section class="header-wrapper">
        <header class="headline" role="banner">
    
        <a class="headline__title" href="https://hakuoku.github.io/agakuTeX/"><img src="https://hakuoku.github.io/agakuTeX/img/logo.png" alt="Home"></a>
    
</header>

        <nav class="menu" role="navigation" id="main-menu">
    <ul class="menu__items">
        
        
        <li class="blog">
            <a href="http://hakuoku.hatenablog.com/" title="Blog"><img src="https://hakuoku.github.io/agakuTeX/img/hb.png" alt="Blog"></a>
        </li>
        
        
        <li class="twitter">
            <a href="https://twitter.com/isaribi_saitoh" title="Follow me"><img src="https://hakuoku.github.io/agakuTeX/img/tw.png" alt="Follow me"></a>
        </li>
        
        
        <li class="github">
            <a href="https://github.com/hakuoku" title="Fork me"><img src="https://hakuoku.github.io/agakuTeX/img/gh.png" alt="Fork me"></a>
        </li>
        
        
    </ul>
</nav>

        
<gcse:searchbox-only></gcse:searchbox-only>

<button type="button" class="drawer-toggle drawer-hamburger">
  <span class="sr-only">toggle navigation</span>
  <span class="drawer-hamburger-icon"><img src="https://hakuoku.github.io/agakuTeX/img/toc.png" alt="TOC"></span>
</button>
 
<nav id="side-menu" class="drawer-nav">
  <ul class="drawer-menu">
    
    <li><a href="https://hakuoku.github.io/agakuTeX/">TOP</a></li>
    
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">前説 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/1_1beginning/">発端</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/1_2whatstex/">TeXとは</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/1_3usage/">このサイトの使い方</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">導入 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/2_1prepare/">準備</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/2_2install/">インストール</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/2_3test/">テスト</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">ファイル作成 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/3_1stuff/">いるもの</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/3_2settings/">設定</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/3_3escape/">ファイル作成とエスケープ</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/3_4documentclass/">ドキュメントクラスの設定</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li class = "sub-menu active drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">本文の編集 - 基盤編 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/4_1linebreak/">改行・段落</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/4_2indent/">インデント（字下げ）・空白</a></li>
                    
                
                    
                    <li class = "drawer-dropdown-menu-item sub-menu">
                    全角・半角 - 文字と記号の縦横
                        <ul class = "sub">
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_1rensuji/">縦中横</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_2regex/">note：検索・置換と正規表現</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_3accent1/">アクセントと特殊記号 (1)</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_4accent2/">アクセントと特殊記号 (2)</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_5unicode/">note：Unicodeで遊ぼう</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_3_6accent3/">アクセントと特殊記号 (3)</a></li>
                            
                        </ul>
                    </li>
                    
                
                    
                    <li class = "drawer-dropdown-menu-item sub-menu">
                    約物
                        <ul class = "sub">
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_0punct/">はじめに</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_1quotation/">引用符</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_2otf/">OTFパッケージ</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_3exclamation/">！と？ - 縦中横ふたたび</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_4wordglue/">和文・欧文間のスペース</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_5brackets/">カッコ類</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_6dash/">ダッシュ</a></li>
                            
                            <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/4_4_7parameter/">note：変数と長さの単位</a></li>
                            
                        </ul>
                    </li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/4_5summary1/">まとめ</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li class = "sub-menu drawer-dropdown">
        <a class="drawer-menu-item" href="#" data-toggle="dropdown" role="button" aria-expanded="false">本文の編集 - 発展編 <span class="drawer-caret"></span></a>
            <ul class = "sub drawer-dropdown-menu">
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_1flush/">カスタム字下げ・地寄せ</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_2ruby/">ルビ</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_3bouten/">傍点・傍線</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_4emph/">太字・斜体</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_5fontsize/">文字サイズ</a></li>
                    
                
                    
                    <li><a class="drawer-dropdown-menu-item" href="https://hakuoku.github.io/agakuTeX/tutorial/5_6framed/">罫囲み（枠をつける）</a></li>
                    
                
            </ul>
            </li>
        
    
        
        <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/replace/">青空文庫からの置換一覧（作成中）</a></li>
        
    
        
        <li><a href="https://hakuoku.github.io/agakuTeX/tutorial/reference/">主要参考文献（随時追加）</a></li>
        
    
        
        <li><a href="https://hakuoku.github.io/agakuTeX/topics/">索引</a></li>
        
    
        
        <li><a href=""></a></li>
        
    
        
        <li><a href="https://hakuoku.github.io/agakuTeX/tips/">TeX Tips</a></li>
        
    
  </ul>
</nav>

    </section>
    <main class="content" role="main" id="main-content" itemscope itemtype="http://schema.org/Article">
        <article class="post">
            <header>
                <h1 class="post__title" itemprop="name">改行・段落</h1>
            </header>
            <section class="post__content" itemprop="articleBody">
                

<p>&#x3000;それにしても読みづらいですね。改行が全然なくて一面に字が植えてある。<strong>面倒なことにTeXは、いわゆる普通の改行を感知しません。</strong><br />
　いやさすがに語弊があるな。正しくは下のように、間に空行を入れることで改行、つまり新たな段落が製造されます。</p>


<figure >
    
        <img src="https://hakuoku.github.io/agakuTeX/img/41linebreak/kuugyou.png" alt="新しい段落" />
    
    
</figure>


<p>　じゃあ改行したいところに空行を入れていけばいいのかとなると、そうとも言い切れません。だってこうなるんだよ。（十蘭は改行少ないので乱歩で）</p>


<figure >
    
        <img src="https://hakuoku.github.io/agakuTeX/img/41linebreak/rampo.png" alt="行間の空きすぎた乱歩" />
    
    
</figure>


<p>　いやだ！こんなの乱歩じゃない！なにより面倒くさい。いちいち空きを入れてくなんてミスも増えそうだし。<br />
　間が開かない段落内強制改行のやり方は、<a href="http://www.latex-cmd.com/struct/space.html">一般的</a>には行末に\か\newlineを入れることです。ただこれも、面倒くささとミスのしやすさでは大して変わりません。</p>

<p>　もともと英語の特に論文では、新しい行＝新しい段落という認識なので、空行方式で破綻なく書いて組版できます。でも小説でいうと、改行って必ずしも新しい段落に移るわけじゃないですよね。特にセリフがそうで、会話になると改行のオンパレードだけど段落は全部一緒です。<br />
　この改行・段落問題はMarkdownなどとも共通で、個人的にはかなり根深い問題だと思っています。単なる英語と日本語の壁かと思ったんですが、機械にとっての解析のしやすさや伝統的な組版ルールとの絡みなどもあり、また英語圏でも空行派vs反対派議論は存在するようです。<sup class="footnote-ref" id="fnref:1"><a rel="footnote" href="#fn:1">1</a></sup><br />
　というわけでここでは正しい文法を模索するよりも、.texファイルの扱いやすさおよび表現としての柔軟さを重視します。たとえ段落と強制改行を使い分けてきちんと整形した正しいTeX文書でも、エディタでファイルを開いた時に行の間がスカスカだと腹が立ってくるからです。編集作業は楽しくやりたい。</p>

<p>　そのためにはあらかじめこちら側で、「全部の行を見たまま改行する」的なコマンドを指定しなければなりません。TeXにはもともと<code>\obeylines</code>というコマンドがあって、これを書いてやると大体望む動作になります。<br />
　エスケープの時のような部分的なコマンドではない、文書全体に関わるコマンドは本文が始まる前、<code>\documentclass</code>と<code>\begin</code>の間で指定します。ここの間のことを<strong>プリアンブル</strong>といいます。以降のコード例ではプリアンブルの部分のみを示していることがあります。<br />
　これでちゃんと改行できたかのように見えるんですが、実はまだ落とし穴があります。</p>


<figure >
    
        <img src="https://hakuoku.github.io/agakuTeX/img/41linebreak/obeylines.png" alt="空行が反映されない" />
    
    
</figure>


<p>　<strong>空きが反映されてない。</strong>実はobeylinesは、「 <em>文字のない空白だけの行は無視する</em> 」というTeX本来の動作に従います。なので一行アキや二行アキを入れたくて何回改行しても無視されます。<br />
　空行の制御には\vspaceコマンドなどがあるんですが、本文が読みづらくなるのであまり使いたくありません。どうしたもんかと悩んでいたところ、<a href="https://xscey.github.io/">xsceyさん</a>が解決法を教えて下さいました。（ありがとうございます！）<br />
　\obeylinesは使わず、以下のようにしてやります。</p>

<pre><code class="language-LaTeX">\documentclass{utbook}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
{\catcode`\^^M=\active%
\gdef\xobeylines{\catcode`\^^M\active \def^^M{\par\leavevmode}}%
\global\def^^M{\par\leavevmode}}
\AtBeginDocument{\xobeylines}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
︙
</code></pre>

<p>　何やら恐ろしげな呪文ですが、意味は分からなくても大丈夫です。（詳しい技術的な解説は<a href="http://hakuoku.hatenablog.com/entry/2016/12/14/222246">ブログ</a>の方にあります） こういうTeXへの命令を組み合わせた一種のプログラムを<strong>マクロ</strong>と呼ぶことだけ覚えておいてください。<br />
　それから%の羅列はただの区切りで、意味はありません。TeXでは頭に半角の<code>%</code>をつけた文は本文にも組版にも影響を与えない<strong>コメント</strong>として扱われるので、それを利用してプリアンブル部分を挟んでみました。以降はプリアンブルでの命令はこの区切り線の内側に書いていきます。うるさかったら省いてもOKです。（ただしマクロ行末の％は消さないで！）</p>

<p>　これで、本文通りの改行になりました。</p>


<figure >
    
        <img src="https://hakuoku.github.io/agakuTeX/img/41linebreak/exobeylines.png" alt="exobeylines適用後" />
    
    
</figure>


<h4 id="参考">参考</h4>

<ul>
<li><a href="https://books.google.com/books/about/A_Beginner_s_Book_of_TEX.html?hl=ja&amp;id=72wKBwAAQBAJ">A Beginner’s Book of TEX - Raymond Seroul</a>
　6.4 obeying lines</li>
<li><a href="https://books.google.co.jp/books/about/TEX_in_Practice.html?hl=ja&amp;id=xWvgBwAAQBAJ">TEX in Practice: Volume III: Tokens, Macros - Stephan v. Bechtolsheim</a></li>
</ul>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1"><a href="https://meta.stackexchange.com/questions/26011/should-the-markdown-renderer-treat-a-single-line-break-as-br">Should the markdown renderer treat a single line break as br? - Meta Stack Exchange</a><br>また<a href="http://conv.denshochan.com/markdown">でんでんマークダウン</a>では、デフォルトでこの問題をクリアしています。
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div>

            </section>
            <nav class = "pager" >
    <ul class = "pager-list">
        
            <li class = "pager-prev"><a href = "https://hakuoku.github.io/agakuTeX/tutorial/3_4documentclass/">←ドキュメントクラスの設定</a></li>
        
        
            <li class = "pager-next"><a href = "https://hakuoku.github.io/agakuTeX/tutorial/4_2indent/">インデント（字下げ）・空白→</a></li>
        
    </ul>
</nav>

        </article>
        <section class="post__comment">
            <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hakuoku" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            
        </section>
    </main>
    <footer class="legal" role="contentinfo">
    <p>&copy; 2018 Hakuoku Shobo Some Rights Reserved. Performed by <a href="//gohugo.io" title="Hugo :: A fast and modern static website engine">Hugo</a> .</p>


</footer>

    
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/prism.js"></script>
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/iscroll.js"></script>
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/drawer.min.js"></script>
<script type="text/javascript" src="https://hakuoku.github.io/agakuTeX/js/dropdown.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
      $(".drawer").drawer();
    });
</script>

</body>
</html>
