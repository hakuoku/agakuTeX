+++
title = "ダッシュ"
date = "2017-11-10T14:03:29+09:00"
description = ""
slug = "dash"
weight = 446
lastmod = "2017-11-20T11:18:51+09:00"
topics = ["kern", "ベースライン", "tbaselineshift", "パラメータ（変数）", "pxcjkcat", "二重感嘆符"]
[menu.toc]
    parent = "punctuation"
+++

&#x3000;ダッシュ（ダーシ、倍角ダッシュ）――は好きですか？私は大好きです。めっちゃ使います。ところがTeXにおいて倍角ダッシュは、使うフォントによって真ん中に隙間ができてしまいます。IPAもそうなのでデフォルトでの組版結果では隙間が空いています。  
　それで全然気にならない人、あるいは繋がるフォントを使うことにした人はもう全部飛ばして構いません。以下はダッシュを繋げようとする試みです。  
（よく使うがゆえにこだわりをこじらせて無駄に長いです）

　さて一口にダッシュと言っても世の中には長い棒に見える記号がいくつもありますので、まずこれ`――`は何なのかきちんと確認しておきましょう。  
　筆者はキーボードの0の隣、伸ばし棒（長音記号）のキーから長音記号`ー`を入れて、これを変換して出てくる「全角ダッシュ」を2つ並べたものを辞書登録して使っています。これをUniViewで見てみると、U+2015の「HORIZONTAL BAR」だと分かりました。  

{{< figure src="/img/44dash/unidashes.jpg" caption="" alt="UniViewにおける各種ダッシュ" class="" >}}

　ところが2015付近にはそれっぽい記号がたくさんあります。U+2010から順にHYPHEN、2011：NON-BREAKING HYPHEN、2012：FIGURE DASH、2013：EN DASH、2014：EM DASHとなっています。  
　これらをコピーして2つ並べてタイプセットすると、結果はこうなりました。

{{< figure src="/img/44dash/tatedashes.jpg" caption="" alt="縦組みのダッシュたち" class="" >}}

　どれもガタガタですね。少なくともTeXにおいては和文のダッシュとみなされるのはホリゾンタルバーだけのようなので、ここではこの記号`――`を使うものとします。青空文庫の定義とも合致しています。  
　（[Wikipediaのダッシュの項](https://ja.wikipedia.org/wiki/%E3%83%80%E3%83%83%E3%82%B7%E3%83%A5_(%E8%A8%98%E5%8F%B7))などを参照すると、変換した時に出る全角のダッシュは本来ホリゾンタルバーではなくエムダッシュであるべきらしいんですが……TeXがそうなっていないのでここでも正しい定義は無視します）

　それを踏まえた上で対策です。

#### コマンドで入れる方法
　まずはオーソドックスな、マクロでコマンドを定義してそれを使うやりかたです。以下をプリアンブルに追加してください。

```LaTeX
\def\――{―\kern-.5zw―\kern-.5zw―}
```

　そして文中の全てのダッシュの頭にバックスラッシュをつけてやります。いわば`\――`というコマンドによって繋がったダッシュを出力してやるという形式です。  
　このマクロでどうして間が繋がるのかというと、これはつまり「―を1つ出力したらその上に半文字分上にずり上げた―を重ねて出力、もうひとつ―を半文字分重ねて出力」という命令だからです。kernというのは「[カーニング](https://ja.wikipedia.org/wiki/%E3%82%AB%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0)」という言葉があるように、「字詰め」のことです。図解するとこうなります。

{{< figure src="/img/44dash/kern.jpg" caption="" alt="カーニングの図解" class="" >}}

　全てのダッシュにバックスラッシュがつくことが嫌でなければこれが一番シンプルな解決法です。一括置換はこちら。

　　検索する文字列：`――`　→　置換する文字列：`\\――`

#### どうしてもコマンドを打ちたくない人

　筆者のことです。多用しまくる上、だいたいは感情が高まって言葉を途切らせたりタメを入れる時に使うので、いちいちバックスラッシュが入っているとなんとなく水を差されたように感じるんです。  
　というわけでコマンドに頼らず繋げる方法を模索してみます。ヒントは欧文の時のダッシュにありました。

　教科書や[チートシート](https://wtsnjp.com/pdf/platexsheet.pdf)を見てみると、`-`（半角ハイフン）を2つ並べて書くとエヌダッシュ、3つ書くとエムダッシュになるとあります。これは横書きの、しかも欧文のためのダッシュです。ちなみに前者がnの横幅と同じ長さ、後者がmと同じ長さなのでこう呼ぶそうです。  
　試しにこれを縦書きで組んでみましょう。

{{< figure src="/img/44dash/threehyphens.jpg" caption="" alt="ハイフン2つと3つのダッシュ" class="" >}}

　おお、エムダッシュの方がどうやら全角1文字分っぽいですね。ホリゾンタルバーよりも線が細くてシュッとした感じです。  
　倍角ダッシュにしたいので、ハイフンを6つ続けて入れてみます。

{{< figure src="/img/44dash/sixhyphens.jpg" caption="" alt="ハイフン6つの間が繋がったダッシュ" class="" >}}

　やった！繋がった！けどちょっとバランスが変です。左に寄っていますね。  
　これは前項で説明したベースラインのせいです。半角のカッコやダッシュは欧文のベースラインに合った位置に配置されていて、かつそのベースラインは全角文字の正方形の左辺に合わせてあるのでどうしても左にズレてしまうんでした。  
　そして最後でちらっと触れたように、これを調節する方法は実はあります。`\tbaselineshift`です。[^1]  
　文字通りベースラインのシフト（移動）量を決めるパラメータ（変数）で、値を設定してやることで和文に対する欧文の相対的な位置を決めることができます。  
　パラメータとは何ぞやということは次項でやりますので、とりあえず位置を変えられるんだということだけ覚えておいてください。  
　実際にやってみましょう。バランスを見るために山括弧なども入れて、ベースラインシフトを0にして組んでみます。

```LaTeX
\tbaselineshift = 0pt%
\verb|<|あたしの車をtouf-toufだといったね。\verb|>|
手籠を持った馬耳塞《マルセイユ》人------それぞれクッションのバネの滑かな動揺につれて、
```

{{< figure src="/img/44dash/shift0.jpg" caption="" alt="欧文和文のベースラインが中央で一致" class="" >}}

　思いっきり右にずれました。0＝移動しないということなので、和文のベースラインである中央に欧文のベースラインであるアルファベットの底が来ています。  
　何も指定していない時のデフォルトが具体的にどういう値になっているのかは分からないんですが、とにかく少し左にズレていたデフォルトと、大幅に右にズレる0ポイントの間で調節を行います。数値を増やすほど左に行きます。こんな感じになりました。

{{< figure src="/img/44dash/shifts.jpg" caption="" alt="2～3.25ptのシフト" class="" >}}

　うーんどれがいいだろう……実際に使いそうなのは2.5～3ポイントあたりでしょうか。  
　ベースラインをずらしているので、当然ですがすべての欧文文字が一緒についてきます。そんなに半角英数を入れていない場合は目立たないかもしれませんが、十蘭のようにちょいちょいアルファベットが入ってくる文体の人は、和文に対する欧文文字のバランスも見ながら最適な数値を選んでください。

#### ハイフンさえ打ちたくない人
　ハイフン6つとかめんどくさい！普段書いてるホリゾンタルバーのまま繋げて出力したい！というわがままな人にもまだ打つ手はあります。[アクセント付きアルファベット](/tutorial/accent2)を欧文扱いにするために使った、**pxcjkcat**パッケージの力を再び借ります。

　このパッケージはUnicodeのブロックごとに、そのブロックに属する字を和文扱いするか欧文扱いするか切り替えられるようにしてくれるものでした。  
　実はパッケージ呼び出しの際に`prefernoncjk`＝最低限のCJK文字だけ和文扱いであとは全部欧文扱いにするモードを選んだ人は、この問題は既に解決しています。ダッシュすなわちホリゾンタルバーが属する「General Punctuation」ブロックも欧文扱いになっていて、和文のホリゾンタルバーがTeX側で自動的に欧文の相当する記号、すなわちエムダッシュに置き換えられているからです。

　ならそれにすりゃいいじゃんと思うかもしれませんが、ここにも罠があります。General Punctuationブロック（IDは`sym04`）は、`‼・⁉・⁈・⁇`という**二重感嘆符・疑問符記号が出てこない時にしか欧文扱いできません**。原稿にこれらの記号が入ったままprefernoncjkで走らせようとするとエラーになります。  
　rensujiでも記号そのものでもいいよとか言ってすいません……ホリゾンタルバーを欧文扱いしたいなら二重感嘆符記号直書きは諦めてください。逆も然りで、記号を直書きしたいならダッシュの直書きは諦めてください。orz

　二重感嘆符・疑問符記号を使っておらず、かつ`prefercjkvar`モードなどでGeneral Punctuationが和文扱いになっている場合は、欧文扱いに切り替えてやることで自動置き換えが可能になります。プリアンブルにブロックIDか以下の文そのものを追加してください。

```LaTeX
\usepackage[utf8]{inputenc}
\usepackage[prefercjkvar]{pxcjkcat}
\cjkcategory{latn1,sym04}{noncjk}
```

　欧文エムダッシュに置き換わってしまえばあとの手順は上と同じです。バランスを見ながら`\tbaselineshift`に最適な値をセットします。  
　値をセットする命令はどこに書くのかというと、全体に反映させたい場合はプリアンブルに、部分的に使いたい時は本文中の該当箇所に直接書き込みます。変更したシフト量を元に戻す呪文は`\adjustbaseline`です。

[^1]:ちなみに今は縦書きなのでtbaselineshiftを使いますが、横書きの時は`\ybaselineshift`になります。

#### 参考
- [新しい pLaTeX の話：非公式リリースノート 2016 年版 (2) - Acetaminophen’s diary](http://acetaminophen.hatenablog.com/entry/new-platex-20160507-02)
- [LaTeXでダッシュの隙間処理 :: ひまつぶし雑記帖](http://t2aki.doncha.net/?id=1271166065)