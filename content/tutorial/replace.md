+++
date = "2017-05-07T17:50:02+09:00"
slug = "replace"
description = ""
title = "青空文庫からの置換一覧"
weight = 810
[menu.toc]

+++
&#x3000;以下は筆者の覚え書きを兼ねた青空文庫形式からの検索・置換正規表現一覧です。エディタで一つずつ置換する時用のリファレンスです。  
　Unicode文字プロパティ `\p{プロパティ名}` に対応していない環境では動きません。またAtomのようなJavaScript系の環境では戻り読みができないので、`(?<=式)・(?<!式)`が出てくる表現は使えません。  
　[鬼雲](https://github.com/k-takata/Onigmo/blob/master/doc/RE.ja)（鬼車）エンジンを積んでいれば安心です。具体的にはMeryを使いましょう。  
　可能な限り考慮しましたが、青空文庫の[注記一覧](http://www.aozora.gr.jp/annotation/)から外れた書き方をしている文書は原則としてサポート外です。また正規表現だけでは困難な処理は結局目視で書き換えることになります。  
　全部まとめて自動化したスクリプトは現在作成中です。しばしお待ち下さい。

### 最初に
　原稿は必ずUTF-8エンコードで保存してください。置換が全て終わるまでTeXのコマンドやプリアンブルはつけずに、原稿本文だけの状態にしておいてください。  
　原則としてこのページの処理は書かれている順番に行います。「すべて置換」は押さず、1回ずつ「次を検索」「次を置換」を押していくのがベターです。

　青空文庫では注記の中の数字は全て全角です。これは正規表現による置換だけでは対応できないので、初めに他の手段で半角に変換しておきます。ここではMeryの[テキスト整形マクロ](http://www.haijin-boys.com/wiki/%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E6%95%B4%E5%BD%A2)及び[全角/半角変換プラグイン](http://www.haijin-boys.com/wiki/%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3:%E5%85%A8%E8%A7%92/%E5%8D%8A%E8%A7%92%E5%A4%89%E6%8F%9B%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3)を使います。

`［.*?[０-９].*?］`で検索・選択しながらマクロかプラグインで変換（手で書き換えてもいい）



### 本文のサニタイズ
#### 外字
#### 特殊記号
#### アクセント分解

### 縦中横

検索する文字列：`(.+?)［＃「\1」は縦中横］`　→　置換する文字列`\\rensuji{\1}`




<!-- #### 字下げ・地寄せ
##### 一行だけの字下げ
ブロック字下げに寄せて置換する  
``　→　``

##### ブロックでの字下げ
``　→　``

##### 凹凸の複雑な字下げ
``　→　``  
``　→　``  
置換した後で★を適切な値に手で書き換える -->




