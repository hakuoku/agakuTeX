+++
title = "note：改行マクロの副作用"
date = 2018-05-11T17:48:54+09:00
description = ""
slug = "5_7_3xobeylines"
weight = 573
topics = ["xobeylines", "disobeylines", "vspace"]
[menu.toc]
    parent = "footnote"
+++

&#x3000;ここまでで大体分かったように、改行マクロxobeylinesには重大な陥穽があります。前項のルビがむちゃくちゃになった後注のように、パッケージと組み合わされた時に予期せぬ挙動になることがあるんです。  
　他にもコマンドだけの行の後ろには必ず`%`をつけないといけないとか、はたまた枠をつけたり行間を空けたりとなるとその法則が通じなくなるとかで正直言って煩わしくなってきた方もいるかと思います。  
　[改行](/tutorial/4_1linebreak)の項で書いたように、もともとxobeylinesは表層のLaTeXではなくTeXレベルの上級者向けのものです。筆者の勝手なポリシーでどうしても空行を入れずに改行したかったため冒頭に持ってきましたが、本来は使わないなら使わないほうがいいマクロです。  
　なので空行が入ってもいいという方はその本来の改行方法にならうことをおすすめします。あるいは行末に`\\`をつける強制改行を使ってもいいでしょう。

　その場合、問題は1行アキなどの空行を入れたい時です。前にも説明した通りソース中で何行空きを入れても無視されるので、文字サイズや枠囲みのところで使った`\vspace`を使います。この場合は1行の幅の横方向（“v”だから）の空白を入れたいので、コマンドは`\vspace{\baselineskip}`になります。  
　この時注意したいのがコマンドの書き方。`\vspace{\baselineskip}`を空行で挟まないと、意図した通りの表示になりません。なので書き方は以下のようになります。

```LaTeX
　思いようによれば、これはさながら、千寿姫と安寿丸の悲しい物語にも似ているようで、さすがに猛きコン吉も、その心底、いささか愁然たるものあり。

\vspace{\baselineskip} %ここが空行

　さて、この悲しい朝夕が、いつまで続くことやら、床屋の香水棚へカアテンを張りに行ったジェルメエヌ後家からは、もう十日にもなるが一向に\ruby{音便}{おとさた}なく、\ruby{小手}{こ|て}をかざして巴里の方角を眺めやれば、うす薔薇色の雲がたな引き、いかにも快活な空模様であるに引きかえ、この島には雨雲低く垂れ、ねぼけ顔する灯台の回旋光が、雲の下腹を撫でては、\ruby{空}{むな}しく高い虚空へ散光するのであった。\\
```

{{< figure src="/img/57xobeylines/vspace.png" caption="" alt="vspaceで1行アキ" class="" >}}

　2行アキ、3行アキにしたい時は改行してその分`\vspace{\baselineskip}`の数を増やせばできます。

```LaTeX
以下3行アキ

\vspace{\baselineskip}
\vspace{\baselineskip}
\vspace{\baselineskip}

続き\\
```

　逆に筆者同様どうしてもxobeylinesを使ってWYSIWYGな改行がしたい方は、これ以降もリスクがあることを承知しておいてください。特にこのチュートリアルを終えた後、ご自分で好きなパッケージを導入しようとする時に注意が必要です。何かおかしいと思ったら、前項でやったように`\disobeylines`を使って改行マクロを無効化する小技を試してみてください。  
　それでもなお使えないパッケージもあります。必要不可欠なパッケージであればxobeylinesは諦めましょう。逆に改行の方をどうしても譲れなければパッケージの方を諦めましょう。何事もトレードオフです。